<% content_for :head do%>
  <%= javascript_include_tag 'comments' %>
<%end%>
<div class="col-md-offset-1 col-md-7" data-behavior = "question" >
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3><%= @question.title %></h3>
      <%if @question.draft? %>
      <h6 class="text-right"> <b>This question is in draft state</b></h6>
      <%end%>
    </div>
    <div class="panel-body">
      <%= simple_format @question.content %>
    </div>
    <div class="panel-body">
      <b>TOPICS:</b><%= render @question.topics %>
    </div>
    <div class="panel-footer">
      <div class="col-xs-6 col-sm-3"><%= link_to 'Mark offesnive', "#" %>   </div>
      <div class="col-xs-6 col-sm-4">
        <% if can_edit_question?(@question,current_user) %>
        <%= link_to 'Edit', edit_question_path(@question) %>
        <% end %>
      </div>
    </div>
  </div>
  <div><%= link_to "Add Comment", new_comment_path, remote: true, data: {behavior: "new_comment_link", resourceType: "Question", resourceId: @question.id}%></div>
  </br >
  <div data-behavior="comments">
    <h4>Comments</h4>
      <%= render @question.comments.includes(:user).order(created_at: :desc)%>
  </div>
  <% if @question.published%>
  <div data-behavior = "answers">
    <h3><%= @question.answers_count%> ANSWERS</h3>
    <%= render @answers%>
  </div>
  
   <%= render :template => "answers/new" %>
   <%end%>
<%= render "layouts/comment_modal"%>
</div>

